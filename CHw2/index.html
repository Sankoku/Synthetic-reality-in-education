<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞ —Ä–æ–±–æ—Ç–∞ ‚Ññ2 - AR —Å—Ü–µ–Ω–∞</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.1.4/dist/mindar-image-three.prod.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      overflow: hidden;
      font-family: Arial, sans-serif;
    }
    
    canvas {
      display: block;
    }
    
    #mindar-container {
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
    
    #info {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 10px;
      border-radius: 5px;
      z-index: 100;
      font-size: 14px;
      max-width: 300px;
    }
    
    #loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      z-index: 200;
    }
  </style>
</head>
<body>
  <div id="loading">
    <div>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è AR...</div>
    <div style="margin-top: 10px; font-size: 12px;">–ù–∞–ø—Ä–∞–≤—Ç–µ –∫–∞–º–µ—Ä—É –Ω–∞ –º–∞—Ä–∫–µ—Ä</div>
  </div>
  
  <div id="info">
    <strong>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞ —Ä–æ–±–æ—Ç–∞ ‚Ññ2</strong><br>
    AR —Å—Ü–µ–Ω–∞ –∑ —Ç—Ä—å–æ–º–∞ –≥–µ–æ–º–µ—Ç—Ä—ñ—è–º–∏:<br>
    üîµ –°–∏–Ω—ñ–π –∫—É–±<br>
    üü¢ –ó–µ–ª–µ–Ω–∞ —Å—Ñ–µ—Ä–∞<br>
    üî¥ –ß–µ—Ä–≤–æ–Ω–∏–π —Ü–∏–ª—ñ–Ω–¥—Ä
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      try {
        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è MindAR
        const mindarThree = new window.MINDAR.IMAGE.MindARThree({
          container: document.body,
          imageTargetSrc: "./marker.mind", // –í–∞—à —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –º–∞—Ä–∫–µ—Ä
          maxTrack: 1,
          uiLoading: "no",
          uiScanning: "no"
        });

        const { renderer, scene, camera } = mindarThree;
        
        // –ü—Ä–∏—Ö–æ–≤–∞—Ç–∏ –µ–∫—Ä–∞–Ω –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—ñ—Å–ª—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
        setTimeout(() => {
          document.getElementById('loading').style.display = 'none';
        }, 2000);

        // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —è–∫–æ—Ä—è –¥–ª—è –º–∞—Ä–∫–µ—Ä–∞
        const anchor = mindarThree.addAnchor(0);
        
        // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥—Ä—É–ø–∏ –¥–ª—è –≤—Å—ñ—Ö –æ–±'—î–∫—Ç—ñ–≤
        const objectGroup = new THREE.Group();
        anchor.group.add(objectGroup);

        // 1. –°–∏–Ω—ñ–π –∫—É–±
        const cubeGeometry = new THREE.BoxGeometry(1, 1, 1);
        const cubeMaterial = new THREE.MeshBasicMaterial({ 
          color: 0x0000FF,
          transparent: true,
          opacity: 0.8
        });
        const cube = new THREE.Mesh(cubeGeometry, cubeMaterial);
        cube.position.set(-1.5, 0, 0); // –ü–æ–∑–∏—Ü—ñ—è –∑–ª—ñ–≤–∞
        objectGroup.add(cube);

        // 2. –ó–µ–ª–µ–Ω–∞ —Å—Ñ–µ—Ä–∞  
        const sphereGeometry = new THREE.SphereGeometry(0.6, 32, 32);
        const sphereMaterial = new THREE.MeshBasicMaterial({ 
          color: 0x00FF00,
          wireframe: false
        });
        const sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);
        sphere.position.set(0, 0, 0); // –ü–æ–∑–∏—Ü—ñ—è –≤ —Ü–µ–Ω—Ç—Ä—ñ
        objectGroup.add(sphere);

        // 3. –ß–µ—Ä–≤–æ–Ω–∏–π —Ü–∏–ª—ñ–Ω–¥—Ä
        const cylinderGeometry = new THREE.CylinderGeometry(0.4, 0.4, 1.2, 32);
        const cylinderMaterial = new THREE.MeshBasicMaterial({ 
          color: 0xFF0000,
          transparent: true,
          opacity: 0.9
        });
        const cylinder = new THREE.Mesh(cylinderGeometry, cylinderMaterial);
        cylinder.position.set(1.5, 0, 0); // –ü–æ–∑–∏—Ü—ñ—è —Å–ø—Ä–∞–≤–∞
        objectGroup.add(cylinder);

        // –î–æ–¥–∞—Ç–∫–æ–≤–æ: –ñ–æ–≤—Ç–∏–π —Ç–æ—Ä –¥–ª—è –∫—Ä–∞—Å–∏
        const torusGeometry = new THREE.TorusGeometry(0.8, 0.2, 16, 100);
        const torusMaterial = new THREE.MeshBasicMaterial({ 
          color: 0xFFFF00,
          wireframe: true
        });
        const torus = new THREE.Mesh(torusGeometry, torusMaterial);
        torus.position.set(0, 1.5, 0); // –ü–æ–∑–∏—Ü—ñ—è –∑–≤–µ—Ä—Ö—É
        objectGroup.add(torus);

        // –ú–∞—Å–∏–≤ –æ–±'—î–∫—Ç—ñ–≤ –¥–ª—è –∞–Ω—ñ–º–∞—Ü—ñ—ó
        const animatedObjects = [cube, sphere, cylinder, torus];

        // –î–æ–¥–∞–≤–∞–Ω–Ω—è –±–∞–∑–æ–≤–æ–≥–æ –æ—Å–≤—ñ—Ç–ª–µ–Ω–Ω—è (—Ö–æ—á–∞ MeshBasicMaterial –Ω–µ –ø–æ—Ç—Ä–µ–±—É—î –æ—Å–≤—ñ—Ç–ª–µ–Ω–Ω—è)
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(ambientLight);

        // –§—É–Ω–∫—Ü—ñ—è –∞–Ω—ñ–º–∞—Ü—ñ—ó
        function animate() {
          const time = Date.now() * 0.001;
          
          // –û–±–µ—Ä—Ç–∞–Ω–Ω—è –∫—É–±–∞
          cube.rotation.x = time * 0.5;
          cube.rotation.y = time * 0.3;
          
          // –ü—É–ª—å—Å–∞—Ü—ñ—è —Å—Ñ–µ—Ä–∏
          sphere.scale.setScalar(1 + Math.sin(time * 2) * 0.1);
          
          // –û–±–µ—Ä—Ç–∞–Ω–Ω—è —Ü–∏–ª—ñ–Ω–¥—Ä–∞
          cylinder.rotation.y = time * 0.8;
          cylinder.rotation.z = Math.sin(time) * 0.2;
          
          // –û–±–µ—Ä—Ç–∞–Ω–Ω—è —Ç–æ—Ä–∞
          torus.rotation.x = time * 0.4;
          torus.rotation.y = time * 0.6;
          
          // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–µ –∫–æ–ª–∏–≤–∞–Ω–Ω—è –≤—Å—ñ—î—ó –≥—Ä—É–ø–∏
          objectGroup.position.y = Math.sin(time * 0.5) * 0.1;
          
          // –ü–æ–≤—ñ–ª—å–Ω–µ –æ–±–µ—Ä—Ç–∞–Ω–Ω—è –≤—Å—ñ—î—ó –≥—Ä—É–ø–∏
          objectGroup.rotation.y = time * 0.1;
        }

        // –û–±—Ä–æ–±–∫–∞ –ø–æ–¥—ñ–π –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –º–∞—Ä–∫–µ—Ä–∞
        anchor.onTargetFound = () => {
          console.log("–ú–∞—Ä–∫–µ—Ä –∑–Ω–∞–π–¥–µ–Ω–æ!");
          document.getElementById('info').style.background = 'rgba(0, 128, 0, 0.7)';
        };

        anchor.onTargetLost = () => {
          console.log("–ú–∞—Ä–∫–µ—Ä –≤—Ç—Ä–∞—á–µ–Ω–æ!");
          document.getElementById('info').style.background = 'rgba(128, 0, 0, 0.7)';
        };

        // –ó–∞–ø—É—Å–∫ AR
        await mindarThree.start();
        
        // –ó–∞–ø—É—Å–∫ —Ü–∏–∫–ª—É —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É –∑ –∞–Ω—ñ–º–∞—Ü—ñ—î—é
        renderer.setAnimationLoop(() => {
          animate();
          renderer.render(scene, camera);
        });

        console.log("AR —Å—Ü–µ–Ω–∞ —É—Å–ø—ñ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–∞!");

      } catch (error) {
        console.error("–ü–æ–º–∏–ª–∫–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó AR:", error);
        document.getElementById('loading').innerHTML = 
          `<div style="color: red;">–ü–æ–º–∏–ª–∫–∞: ${error.message}</div>
           <div style="font-size: 12px; margin-top: 10px;">
           –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Ñ–∞–π–ª—É marker.mind —Ç–∞ –¥–æ—Å—Ç—É–ø –¥–æ –∫–∞–º–µ—Ä–∏
           </div>`;
      }
    });

    // –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
    window.addEventListener('error', (e) => {
      console.error('–ì–ª–æ–±–∞–ª—å–Ω–∞ –ø–æ–º–∏–ª–∫–∞:', e.error);
    });
  </script>
</body>
</html>